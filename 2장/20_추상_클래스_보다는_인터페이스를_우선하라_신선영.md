# item20. ì¶”ìƒ í´ë˜ìŠ¤ ë³´ë‹¤ëŠ” ì¸í„°í˜ì´ìŠ¤ë¥¼ ìš°ì„ í•˜ë¼

# ğŸŠ ì¶”ìƒ í´ë˜ìŠ¤ì™€ ì¸í„°í˜ì´ìŠ¤

## ê³µí†µì 

- ì¸ìŠ¤í„´ìŠ¤ë¡œ ìƒì„±ì´ ë¶ˆê°€ëŠ¥í•˜ë‹¤.
- ì„ ì–¸ë¶€ë§Œ ìˆëŠ” ì¶”ìƒ ë©”ì„œë“œë¥¼ ê°–ëŠ”ë‹¤.
    - ì¸ìŠ¤í„´ìŠ¤ ë©”ì„œë“œë¥¼ êµ¬í˜„ í˜•íƒœë¡œ ì œê³µí•  ìˆ˜ ìˆë‹¤.

## ì°¨ì´ì 

### 1. ëª©ì 

- ì¶”ìƒ í´ë˜ìŠ¤
    - ì¶”ìƒ í´ë˜ìŠ¤ë¥¼ ìƒì†ë°›ì•„ ê¸°ëŠ¥ì„ ì´ìš©í•˜ê³  í™•ì¥ì‹œì¼œì•¼í•œë‹¤.
- ì¸í„°í˜ì´ìŠ¤
    - êµ¬í˜„ì„ ê°•ì œí•´ì„œ êµ¬í˜„ ê°ì²´ê°€ ê°™ì€ ë™ì‘ì„ í•˜ë„ë¡ ë³´ì¥í•œë‹¤.

### 2. ìƒì†

- ì¶”ìƒ í´ë˜ìŠ¤
    - ë‹¨ì¼ ìƒì†ë§Œ ì§€ì›í•˜ê¸° ë•Œë¬¸ì—, **ë‹¤ì¤‘ í´ë˜ìŠ¤ ìƒì†ì´ ë¶ˆê°€ëŠ¥**í•˜ë‹¤.

        ```java
        // Amyì— Studentì„ ì¶”ê°€ë¡œ ìƒì† ë°›ê³  ì‹¶ìœ¼ë©´? -> ë¶ˆê°€ëŠ¥!
        public class Amy extends Person {
          // ...
        }

        abstract class Student {
          // ...
        }
        ```

- ì¸í„°í˜ì´ìŠ¤
    - êµ¬í˜„í•´ì•¼í•˜ëŠ” ë©”ì†Œë“œë§Œ êµ¬í˜„í•˜ë©´ ì–´ë–¤ í´ë˜ìŠ¤ë¥¼ ìƒì†í•˜ë˜ ê°„ì— ê°™ì€ íƒ€ì…ìœ¼ë¡œ ì·¨ê¸‰í•œë‹¤.
    - **ì—¬ëŸ¬ ì¸í„°í˜ì´ìŠ¤ë¥¼ ìƒì†ì´ ê°€ëŠ¥**í•˜ë‹¤.

        ```java
        // Amyì— Studentì„ ì¶”ê°€ë¡œ ìƒì† ë°›ê³  ì‹¶ìœ¼ë©´? -> implements êµ¬ë¬¸ë§Œ ì¶”ê°€í•˜ë©´ ë¨!
        public class Amy extends Person implements Student {
          // ...
            
        }

        interface Student {
          // ...
        }
        ```

### 3. ê¸°ì¡´ í´ë˜ìŠ¤ì˜ í™•ì¥

- ì¶”ìƒ í´ë˜ìŠ¤
    - ê¸°ì¡´ í´ë˜ìŠ¤ì— ë¼ì›Œë„£ê¸° ì–´ë µë‹¤.

    ```java
    // ë§Œì•½ ì—¬ê¸°ì„œ ì¶”ìƒ í´ë˜ìŠ¤ Personì„ í™•ì¥í•´ì•¼í•œë‹¤ë©´?
    public class Amy extends Student {
      // ...
    }

    public class Jason extends Student {
      // ...
    }

    abstract class Student {
    	// ...
    }

    // ì´ë ‡ê²Œ??
    public abstract class Person {
      public abstract void walk();
    }

    abstract class Student extends Person {
    	// ...
    }

    // Studentë¥¼ ìƒì† ë°›ì•˜ë˜ ê°ì²´ë“¤ì€ ëª¨ë‘ walk()ì´ë¼ëŠ” ë©”ì†Œë“œì˜ êµ¬í˜„ì„ í•´ì•¼í•œë‹¤.
    public class Amy extends Student {
      // ...
    }
    ```

- ì¸í„°í˜ì´ìŠ¤
    - ì†ì‰½ê²Œ ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•´ ë„£ì„ ìˆ˜ ìˆë‹¤.

    ```java
    // ë§Œì•½ ì—¬ê¸°ì„œ ì¶”ìƒ í´ë˜ìŠ¤ Personì„ í™•ì¥í•´ì•¼í•œë‹¤ë©´?
    public class Amy extends Student {
      // ...
    }

    public class Jason extends Student {
      // ...
    }

    abstract class Student {
    	// ...
    }

    // ì›í•˜ëŠ” ê°ì²´ë§Œ êµ¬í˜„ì„ í•  ìˆ˜ ìˆë‹¤.
    public class Amy extends Student implements Person {
      // ...
    }
    ```

### 4. ë¯¹ìŠ¤ì¸ ì •ì˜

íŠ¹ì • í´ë˜ìŠ¤ì˜ ì£¼ ê¸°ëŠ¥ì— **ì¶”ê°€ì ì¸ ê¸°ëŠ¥ì„ í˜¼í•©(mixed-in)**í•˜ëŠ” ê²ƒì´ë‹¤.

- ì¶”ìƒí´ë˜ìŠ¤
    
    - ë‹¨ì¼ ìƒì†ë§Œ ì§€ì›í•˜ê¸° ë•Œë¬¸ì— ë¯¹ìŠ¤ì¸ì´ ë“¤ì–´ê°ˆë§Œí•œ ìë¦¬ê°€ ì—†ë‹¤.
- ì¸í„°í˜ì´ìŠ¤
    - ì†ì‰½ê²Œ êµ¬í˜„ì´ ê°€ëŠ¥í•˜ë‹¤.
        - ex. Comparable, Clonable, Serializable

    ```java
    public class Amy extends Student implements Comparable {

      @Override
      public int compareTo(Object o) {
        return 0;
      }
    }
    ```

    ```java
    // ë§Œì•½ Comparableì´ ì¶”ìƒ í´ë˜ìŠ¤ë¼ë©´?
    public abstract class Comparable<T> {
      public abstract int compareTo(T o);
    }

    // ë“¤ì–´ê°ˆ ìë¦¬ê°€ ì—†ë‹¤! ğŸ˜±
    public class Amy extends Student {
    	// ...
    }
    ```

### 5. ê³„ì¸µêµ¬ì¡°

ğŸ‘§ `Amy`ë¼ëŠ” ê°ì²´ê°€ `Student`ì¸ ë™ì‹œì— `Intern`ì¸ ê²½ìš°ì—

- ì¶”ìƒí´ë˜ìŠ¤
    - ë³µì¡í•œ ê³„ì¸µêµ¬ì¡°ì¼ ê²½ìš°ì— ë§ì€ ì¡°í•©ì´ í•„ìš”í•˜ê³ , **ê³ ë„ ë¹„ë§Œ ê³„ì¸µ**ìœ¼ë¡œ ì´ì–´ì§ˆ ìˆ˜ ìˆë‹¤.

    ```java
    public abstract class Student {
        // ...
    }

    public abstract class Intern {
        // ...
    }

    // ë‹¨ì¼ ìƒì†ë§Œ ê°€ëŠ¥í•˜ê¸° ë•Œë¬¸ì— ì¸í„´ì¸ ë™ì‹œì— í•™ìƒì¸ ì¶”ìƒ í´ë˜ìŠ¤ê°€ í•„ìš”í•˜ë‹¤.
    public abstract class StudentIntern {
        // ...
    }

    public class Amy extends SutdentIntern {
    	// ...
    }
    ```

- ì¸í„°í˜ì´ìŠ¤
    - ê³„ì¸µêµ¬ì¡°ê°€ ì—†ëŠ” íƒ€ì… í”„ë ˆì„ì›Œí¬ë¥¼ ë§Œë“¤ ìˆ˜ ìˆë‹¤.

    ```java
    public interface Student {
        // ...
    }

    public interface Intern {
        // ...
    }

    // ë¬¸ì œ ì—†ë‹¤.
    public class Amy implements Student, Intern {
    	// ...
    }
    ```

### 6. ê¸°ëŠ¥ ì¶”ê°€

- ì¶”ìƒ í´ë˜ìŠ¤
    - ê¸°ëŠ¥ì„ ì¶”ê°€í•˜ëŠ” ë°©ë²•ì´ ìƒì†ë°–ì— ì—†ë‹¤. â†’ í™œìš©ë„ê°€ ë–¨ì–´ì§€ê³  ê¹¨ì§€ê¸°ë„ ì‰½ë‹¤ (ë˜í¼ í´ë˜ìŠ¤ë³´ë‹¤)
- ì¸í„°í˜ì´ìŠ¤
    - ë˜í¼ í´ë˜ìŠ¤ì™€ í•¨ê»˜ ì‚¬ìš©í•˜ë©´ ìƒì†ë³´ë‹¤ ì•ˆì „í•˜ê³  ê°•ë ¥í•˜ê²Œ ê¸°ëŠ¥ì„ í–¥ìƒì‹œí‚¬ ìˆ˜ ìˆë‹¤. (w. item18)

# ğŸ‘» default ë©”ì„œë“œ

êµ¬í˜„ ë‚´ìš©ì´ ìˆëŠ” ë©”ì†Œë“œë¡œ, êµ¬í˜„ ë°©ë²•ì´ ëª…í™•í•˜ë‹¤ë©´ ì¸í„°í˜ì´ìŠ¤ì—ì„œ ì‚¬ìš©ì´ ê°€ëŠ¥í•˜ë‹¤.

```java
public interface Student {
  public void study();
  public default void syaHello() {
    System.out.println("ì•ˆë…•í•˜ì„¸ìš”");
  }
}
```

### ì£¼ì˜ì‚¬í•­

1. @impleSpecì„ ë¶™ì—¬ ë¬¸ì„œí™”í•˜ë©´ ì¢‹ë‹¤. (w. item19)
2. Object ë©”ì„œë“œ (ex. equals, hashCode)ë¥¼ ë””í´íŠ¸ ë©”ì„œë“œë¡œ ì œê³µí•˜ë©´ ì•ˆëœë‹¤.
3. ì¸í„°í˜ì´ìŠ¤ëŠ” ì¸ìŠ¤í„´ìŠ¤ í•„ë“œë¥¼ ê°€ì§ˆ ìˆ˜ ì—†ê³ , publicì´ ì•„ë‹Œ ì •ì  ë©¤ë²„ë„ ê°€ì§ˆ ìˆ˜ ì—†ë‹¤.
    - Java 9 ì´í›„ë¶€í„°ëŠ” private static ë©”ì„œë“œë„ êµ¬í˜„ì´ ê°€ëŠ¥í•˜ê²Œ ë³€ê²½ë˜ì—ˆë‹¤.

# ğŸ¦´ ì¸í„°í˜ì´ìŠ¤ì™€ ì¶”ìƒê³¨ê²© êµ¬í˜„ í´ë˜ìŠ¤

## í…œí”Œë¦¿ ë©”ì„œë“œ íŒ¨í„´

ì¸í„°í˜ì´ìŠ¤ + ê³¨ê²© êµ¬í˜„ í´ë˜ìŠ¤

ì¶”ìƒ í´ë˜ìŠ¤ì²˜ëŸ¼ êµ¬í˜„ì„ ë„ì™€ì£¼ëŠ” ë™ì‹œì—, ì¶”ìƒí´ë˜ìŠ¤ë¡œ íƒ€ì…ì„ ì •ì˜í•  ë•Œ ë”°ë¼ì˜¤ëŠ” ì‹¬ê°í•œ ì œì•½ì—ì„œ ììœ ë¡­ë‹¤.

[ì°¸ê³ í•œ ì˜ˆì œ ì½”ë“œ](https://dzone.com/articles/favour-skeletal-interface-in-java)

```java
// ì¸í„°í˜ì´ìŠ¤
public interface Phone {
  void booting();
  void greeting();
  void shutdown();
  void process();
}
```

```java
public class IPhone implements Phone {

  @Override
  public void booting() {
    System.out.println("booting ...");
  }

  @Override
  public void greeting() {
    System.out.println("I am iPhone");
  }

  @Override
  public void shutdown() {
    System.out.println("shut down ...");
  }

  @Override
  public void process() {
      booting();
      greeting();
      shutdown();
  }
}
```

```java
public class GalaxyPhone implements Phone {
  @Override
  public void booting() {
    System.out.println("booting ...");
  }

  @Override
  public void greeting() {
    System.out.println("I am galaxy phone");
  }

  @Override
  public void shutdown() {
    System.out.println("shut down ...");
  }

  @Override
  public void process() {
    booting();
    greeting();
    shutdown();
  }
}
```

`iPhone`ê³¼ `GalaxyPhone` ëª¨ë‘ ê°™ì€ ì¸í„°í˜ì´ìŠ¤(`Phone`)ë¥¼ êµ¬í˜„í•˜ê³  ìˆê³ , `booting()`ê³¼ `shutdown()`ì€ ê°™ì€ ë™ì‘ì„ í•˜ê³  ìˆë‹¤.

ì—¬ê¸°ì„œ **ì¶”ìƒê³¨ê²© êµ¬í˜„ í´ë˜ìŠ¤**ì„ ì´ìš©í•˜ë©´ ì¤‘ë³µ ì½”ë“œë¥¼ ì œê±°í•  ìˆ˜ ìˆë‹¤.

```java
// ì¶”ìƒê³¨ê²© êµ¬í˜„ í´ë˜ìŠ¤ (ë³´í†µ Abstract~ì˜ ë„¤ì´ë°ì„ ì‚¬ìš©í•œë‹¤)
public abstract class AbstractPhone implements Phone {

	// ê°™ì€ ë™ì‘ì„ í•˜ëŠ” ë©”ì†Œë“œë¥¼ ì—¬ê¸°ì— ì •ì˜í•œë‹¤.
  @Override
  public void booting() {
    System.out.println("booting ...");
  }

  @Override
  public void shutdown() {
    System.out.println("shut down ...");
  }

  @Override
  public void process() {
    booting();
    greeting();
    shutdown();
  }
}
```

```java
public class IPhone extends AbstractPhone implements Phone {

  @Override
  public void greeting() {
    System.out.println("I am iPhone");
  }
}
```

![Untitled](https://user-images.githubusercontent.com/42836576/105929647-64098c00-608b-11eb-8df0-909bd4809e73.png)

ì‹¤í–‰ê²°ê³¼

```java

public class GalaxyPhone extends AbstractPhone implements Phone {
  @Override
  public void greeting() {
    System.out.println("I am galaxy phone");
  }
}
```

ì¤‘ë³µ ì œê±° ì„±ê³µ!

### ğŸ§ ê°œì¸ì ì¸ ê¶ê¸ˆì !

> ê·¸ëƒ¥ `Phone`ì— `default`ë¥¼ ì‚¬ìš©í•´ì„œ ë©”ì†Œë“œë¥¼ êµ¬í˜„í•˜ë©´ ì•ˆë˜ë‚˜?

ì™¸ë¶€ì—ì„œì˜ í˜¸ì¶œì„ ë§‰ê³  ì‹¶ë‹¤ë©´ ì¶”ìƒí´ë˜ìŠ¤ë¡œ ì‚¬ìš©í•˜ëŠ”ê²Œ ë§ëŠ” ê²ƒ ê°™ë‹¤. ì¶”ìƒí´ë˜ìŠ¤ë¥¼ ì‚¬ìš©í•˜ë©´ protected, private ì œì–´ìë¥¼ ì§€ì •í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì´ë‹¤. ì¸í„°í˜ì´ìŠ¤ëŠ” ê¸°ë³¸ì ìœ¼ë¡œ ë³€ìˆ˜í•„ë“œëŠ” public static final ì´ë©°, ëª¨ë“  ë©”ì†Œë“œëŠ” public abstract ì´ë¯€ë¡œ ì¸í„°í˜ì´ìŠ¤ë¡œ êµ¬í˜„í•  ê²½ìš°, í…œí”Œë¦¿ ë©”ì†Œë“œ ë‚´ë¶€ì—ì„œë§Œ í˜¸ì¶œë˜ì–´ì•¼ í•  ë©”ì†Œë“œë“¤ì´ public ì œì–´ìì— ì˜í•´ ì˜ë„ì¹˜ ì•Šì€ ì‚¬ìš©ì²˜ì—ì„œ í˜¸ì¶œë  ìœ„í—˜ì´ ìˆë‹¤.

[ì¶œì²˜](https://yaboong.github.io/design-pattern/2018/09/27/template-method-pattern/)

# ğŸ‘¨â€ğŸ‘¨â€ğŸ‘§â€ğŸ‘§ ì‹œë®¬ë ˆì´íŠ¸í•œ ë‹¤ì¤‘ ìƒì†

ë§Œì•½ `iPhone`ì—ì„œ `PhoneManufacturer`ë¼ëŠ” ì œì¡°ì‚¬ í´ë˜ìŠ¤ë¥¼ ìƒì†ë°›ì•„ì•¼í•´ì„œ ì¶”ìƒê³¨ê²© êµ¬í˜„ í´ë˜ìŠ¤ë¥¼ ìƒì† ë°›ì§€ ëª»í•œë‹¤ë©´?

```java
public class PhoneManufacturer {
  public void printManuFacturer() {
    System.out.println("Made by Apple");
  }
}
```

```java
// ê³¨ê²© êµ¬í˜„ì„ í™•ì¥í•œ í´ë˜ìŠ¤
public class InnerAbstractPhone extends AbstractPhone {

  @Override
  public void greeting() {
    System.out.println("I am iPhone");
  }
}
```

```java
public class IPhone extends PhoneManufacturer implements Phone {
  InnerAbstractPhone innerAbstractPhone = new InnerAbstractPhone(); // ë‚´ë¶€ í´ë˜ìŠ¤ë¡œ ì •ì˜

  @Override
  public void booting() {
    innerAbstractPhone.booting();
  }

  @Override
  public void greeting() {
    innerAbstractPhone.greeting();
  }

  @Override
  public void shutdown() {
    innerAbstractPhone.shutdown();
  }

  @Override
  public void process() {
    printManuFacturer();
    innerAbstractPhone.process();
  }
}
```

![Untitled 1](https://user-images.githubusercontent.com/42836576/105929640-62d85f00-608b-11eb-80b4-93dd3e2fb234.png)

ìœ„ì™€ ìš°íšŒì  ê³¨ê²© êµ¬í˜„ì„ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. ì´ì™€ ê°™ì€ ë°©ì‹ì„Â **ì‹œë®¬ë ˆì´íŠ¸í•œ ë‹¤ì¤‘ ìƒì†(simulated multiple inheritance)**ì´ë¼ê³  í•œë‹¤.

### ê³¨ê²© êµ¬í˜„ ì‘ì„± ë°©ë²•

1. ì¸í„°í˜ì´ìŠ¤ë¥¼ ë³´ë©° ë‹¤ë¥¸ ë©”ì„œë“œë“¤ì˜ êµ¬í˜„ì— ì‚¬ìš©ë˜ëŠ” ê¸°ë°˜ ë©”ì„œë“œ ì„ ì •
2. ê¸°ë°˜ ë©”ì„œë“œë“¤ì„ ì‚¬ìš©í•´ êµ¬í˜„í•  ìˆ˜ ìˆëŠ” ë©”ì„œë“œë“¤ì„ ë””í´íŠ¸ ë©”ì„œë“œë¡œ ì œê³µ
3. ê¸°ë°˜ ë©”ì„œë“œë‚˜ ë””í´íŠ¸ ë©”ì„œë“œë¡œ ë§Œë“¤ì§€ ëª»í•œ ë©”ì„œë“œëŠ” í•´ë‹¹ ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•˜ëŠ” ê³¨ê²© êµ¬í˜„ í´ë˜ìŠ¤ì—ì„œ ì‘ì„±
4. ì„¤ê³„, ë¬¸ì„œí™” í•„ìˆ˜!

# ğŸ˜¶ ë‹¨ìˆœ êµ¬í˜„

ìƒì†ì„ ìœ„í•´ ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í–ˆìœ¼ë‚˜ ì¶”ìƒí´ë˜ìŠ¤ê°€ ì•„ë‹Œ ê²ƒ

ex. AbstractMap.SimpleEntry

ê³¨ê²© êµ¬í˜„ìœ¼ë¡œ ë§Œë“  ì¶”ìƒ í´ë˜ìŠ¤

[ì°¸ê³ ](https://www.notion.so/https-github-com-Java-Bom-ReadingRecord-issues-60-https-github-com-Java-Bom-ReadingRecord-issue-ad6da901b81e4287a98cb1b89ba86f27)

```java
// ê³¨ê²© êµ¬í˜„ í´ë˜ìŠ¤
abstract class CustomAbstractMapEntry<K, V> implements Map.Entry<K, V> {
  private K key;
  private V value;

  public CustomAbstractMapEntry(final K key, final V value) {
    this.key = key;
    this.value = value;
  }

  abstract void printKey();

  abstract void printValue();

  @Override
  public K getKey() {
    return key;
  }

  @Override
  public V getValue() {
    return value;
  }

  @Override
  public V setValue(final V value) {
    return this.value = value;
  }
}

// ê³¨ê²© êµ¬í˜„ í´ë˜ìŠ¤ë¥¼ ìƒì†ë°›ì€ í´ë˜ìŠ¤
public class CustomMapEntry<K, V> extends CustomAbstractMapEntry<K, V> {

  public CustomMapEntry(K key, V value) {
    super(key, value);
  }

  @Override
  void printKey() {

  }

  @Override
  void printValue() {

  }
}
```

```java
@Test
public void ë‹¨ìˆœêµ¬í˜„_ê³¨ê²©êµ¬í˜„_ë¹„êµ() {
  String key = "key";
  String value = "value";

  CustomMapEntry<String, String> customMapEntry = new CustomMapEntry<>(key, value);
  AbstractMap.SimpleEntry<String, String> simpleEntry = new SimpleEntry<>(key, value); // ë‹¨ìˆœêµ¬í˜„ -> ì¶”ìƒ ë©”ì†Œë“œë¥¼ êµ¬í˜„í•  í•„ìš”ê°€ ì—†ë‹¤.

  Assert.assertEquals(customMapEntry.getKey(), simpleEntry.getKey());
  Assert.assertEquals(customMapEntry.getValue(), simpleEntry.getValue());
}
```

![Untitled 2](https://user-images.githubusercontent.com/42836576/105929644-64098c00-608b-11eb-8480-eab892bded1e.png)



# ğŸ£ ë§ºìœ¼ë©°

ì¼ë°˜ì ìœ¼ë¡œ ë‹¤ì¤‘ êµ¬í˜„ì„ í•  ë•Œì—ëŠ” ì¸í„°í˜ì´ìŠ¤ê°€ ê°€ì¥ ì í•©í•˜ë‹¤.

ë§Œì•½ ë³µì¡í•œ ê²½ìš°ì¼ ë•Œì—ëŠ” ê³¨ê²© êµ¬í˜„ì„ ê³ ë ¤í•´ë³´ì!

ë‹¨, ê³¨ê²© êµ¬í˜„ì€ ê°€ëŠ¥í•œ ì¸í„°í˜ì´ìŠ¤ì˜ default ë©”ì„œë“œ ì œê³µí•´ì•¼í•˜ë©°, ê·¸ ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•œ ëª¨ë“  ê³³ì—ì„œ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤.