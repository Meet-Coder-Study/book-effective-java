# item 6. ë¶ˆí•„ìš”í•œ ê°ì²´ ìƒì„±ì„ í”¼í•˜ë¼

# âœ ê°ì²´ì˜ ì¬ì‚¬ìš©

ê°™ì€ ê¸°ëŠ¥ì„ í•˜ëŠ” ê°ì²´ë¥¼ ì—¬ëŸ¬ ë²ˆ ì‚¬ìš©í•˜ëŠ” ê²ƒ ë³´ë‹¤ **ê°ì²´ í•˜ë‚˜ë¥¼ ì¬ì‚¬ìš©** í•˜ëŠ” ê²ƒì´ ë” ë‚˜ì„ ë•Œê°€ ìˆë‹¤.

## String Pool ì‚¬ìš©

```java
String s1 = new String("java");
String s2 = new String("java");

System.out.println(s1 == s2); // false

String s3 = "java";
String s4 = "java";

System.out.println(s3 == s4); // true
```

`s1`, `s2`ì˜ ìƒì„± ë°©ë²•ì€  `java`ë¼ëŠ” ë¬¸ìì—´ì„ ë§¤ë²ˆ ìƒˆë¡œ ìƒì„±í•˜ì§€ë§Œ,

`s3`, `s4`ëŠ” **[String Constant Pool](https://starkying.tistory.com/entry/what-is-java-string-pool)**ì„ ì‚¬ìš©í•˜ì—¬ `java`ë¼ëŠ” ë¬¸ìì—´ì„ **ìºì‹±**í•˜ì—¬ ì‚¬ìš©í•œë‹¤.



## ì •ì  íŒ©í„°ë¦¬ ë©”ì„œë“œì‚¬ìš©

Wrapper Classì—ì„œëŠ” ìºì‹±ì„ ì§€ì›í•´ì£¼ëŠ” `valueOf()`ë¼ëŠ” ë©”ì†Œë“œê°€ ì¡´ì¬í•œë‹¤.

ëŒ€í‘œì ìœ¼ë¡œ ìì£¼ ì‚¬ìš©í•˜ëŠ” `Boolean`ì˜ ê²½ìš°ì—ëŠ” true/falseë¥¼,

`Short`, `Integer`ì™€ `Long`ì˜ ê²½ìš°ì—ëŠ” -128 ~ 127ê¹Œì§€ì˜ ìˆ˜ì˜ ìºì‹±ì„ ì§€ì›í•´ì¤€ë‹¤.

```java
Integer i1 = new Integer(50);
Integer i2 = new Integer(50);

System.out.println(i1 == i2); // false

Integer i3 = Integer.valueOf(50);
Integer i4 = Integer.valueOf(50);

System.out.println(i3 == i4); // true
```

<br>

í•˜ì§€ë§Œ
![img](https://user-images.githubusercontent.com/42836576/104265601-4ce66e00-54d1-11eb-987f-b46829619af8.png)

```java
Integer i5 = 50;
Integer i6 = 50;
```

1.8ì—ì„œëŠ” êµ³ì´ `valueOf()`ë¥¼ ì¶”ê°€í•  í•„ìš”ê°€ ì—†ë‹¤. ğŸ˜…

<br>

# ğŸ¢ ì§ì ‘ ìºì‹±í•˜ê¸°

## ìƒì„± ë¹„ìš©ì´ ë¹„ì‹¼ ê°ì²´ ìºì‹±

[ìƒì„± ë¹„ìš©ì´ ë¹„ì‹¼ ê°ì²´?](https://stackoverflow.com/questions/20366336/what-is-mean-by-creating-some-object-will-be-expensive-in-java-oop) 

- í¬ê¸°ê°€ ì•„ì£¼ í° Array
- Database Connection
- I/O ì‘ì—…ì„ í•„ìš”ë¡œ í•˜ëŠ” Object
- (ì±…ì— ë‚˜ì˜¤ëŠ”) Pattern

```java
public class Caching {

  private static int[] cachingArray = new int[500000];

  public static void main(String[] args) {
    long beforeTime = System.currentTimeMillis();

    // 1. ìºì‹±ì„ í–ˆì„ ë•Œ
    for (int i = 0; i < 200000; i++) {
      cachingArray[i] = 1;
    }
    System.out.println("ìºì‹± í–ˆì„ ë•Œ ì†Œìš”ì‹œê°„(s) : " + (System.currentTimeMillis() - beforeTime) / 1000);

    // 2. ìºì‹±ì„ í•˜ì§€ ì•Šì•˜ì„ ë•Œ
    beforeTime = System.currentTimeMillis();

    for (int i = 0; i < 200000; i++) {
      int[] nonCachingArray = new int[500000];
      nonCachingArray[i] = 1;
    }
    System.out.println("ìºì‹± ì•ˆ í–ˆì„ ë•Œ ì†Œìš”ì‹œê°„(s) : " + (System.currentTimeMillis() - beforeTime) / 1000);
  }
}
```

![img](https://user-images.githubusercontent.com/42836576/104265592-49eb7d80-54d1-11eb-8315-709445c75f13.png)

í•˜ì§€ë§Œ ê°€ë²¼ìš´ ê°ì²´ëŠ” [ê·¸ëƒ¥ ë§Œë“œëŠ”ê²Œ ë‚«ë‹¤.](https://stackoverflow.com/questions/19658981/cache-for-reducing-time-of-expensive-object-creations) ì˜¤íˆë ¤ ê°ì²´ë¥¼ ìºì‹±í•˜ë ¤ë‹¤ê°€ ì½”ë“œë¥¼ í—·ê°ˆë¦¬ê²Œ í•˜ê³  ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ì„ ëŠ˜ë ¤ ì„±ëŠ¥ì„ ë–¨ì–´ëœ¨ë¦¬ëŠ” ê²½ìš°ë„ ë°œìƒí•˜ê²Œ ëœë‹¤.

<br>

# ğŸ’£ ë¶ˆí•„ìš”í•œ ê°ì²´ ë§Œë“¤ì§€ ì•Šê¸°

## auto-boxing

Reference type - Primitive type ê°„ ìƒí˜¸ ë³€í™˜í•´ì£¼ëŠ” ê¸°ìˆ 

```java
Integer a = 1;
int b = a + 2; // aë¥¼ intë¡œ ë³€í™˜í•´ì¤€ë‹¤.
```

í•˜ì§€ë§Œ ì˜¤í† ë°•ì‹±ì—ë„ ë³€í™˜ ë¹„ìš©ì´ ë“¤ê¸° ë•Œë¬¸ì— ì˜ë„í•˜ì§€ ì•Šì€ ì˜¤í† ë°•ì‹±ì´ ìˆ¨ì–´ë“¤ì§€ ì•Šê²Œ ì£¼ì˜í•´ì•¼í•œë‹¤.

```java
public class AutoBoxing {
  public static void main(String[] args) {
    long beforeTime = System.currentTimeMillis();

    // 1. auto-boxing ì‚¬ìš© O
    Long sum = 0L;
    for (long i = 0; i <= Integer.MAX_VALUE; i++) {
      sum += i;
    }
    System.out.println("auto-boxing í–ˆì„ ë•Œ ì†Œìš”ì‹œê°„(s) : " + (System.currentTimeMillis() - beforeTime) / 1000.0);

    // 2. auto-boxing ì‚¬ìš© X
    beforeTime = System.currentTimeMillis();
    long sum2 = 0L;
    for (long i = 0; i <= Integer.MAX_VALUE; i++) {
      sum2 += i;
    }
    System.out.println("auto-boxing ì•ˆ í–ˆì„ ë•Œ ì†Œìš”ì‹œê°„(s) : " + (System.currentTimeMillis() - beforeTime) / 1000.0);
  }
}
```

![img](https://user-images.githubusercontent.com/42836576/104265598-4ce66e00-54d1-11eb-95ba-8390b6be3a52.png)

<br>

# ğŸ‡ ë§ºìœ¼ë©°

ê°ì²´ ìƒì„±ì€ ë¹„ì‹¸ë‹ˆ í”¼í•´ì•¼í•œë‹¤ (X)

ìƒì„± ë¹„ìš©ì´ ë¹„ì‹¼ ê°ì²´ì˜ ì¬ì‚¬ìš©ì„ ê³ ë ¤í•´ë³´ì (O)
